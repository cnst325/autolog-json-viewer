<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoLog JSON Viewer</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
</head>
<body>
    <div id="app">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="brand">
                <img src="logo.png" alt="AutoLog" class="brand-logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                <div class="brand-icon" style="display: none;">üöó</div>
                <div class="brand-text">
                    <div class="brand-name">AutoLog</div>
                    <div class="brand-subtitle">JSON Viewer</div>
                </div>
            </div>
            
            <nav class="sidebar-nav">
                <button class="tab active" data-tab="vehicles">
                    <span class="tab-icon">üöô</span> 
                    <span data-i18n="vehicles">Vehicles</span>
                    <span class="badge badge-diesel" style="margin-left: auto; font-size: 10px;" id="vehiclesCount">0</span>
                </button>
                <button class="tab" data-tab="fuelLogs">
                    <span class="tab-icon">‚õΩ</span> 
                    <span data-i18n="fuelLogs">Fuel/Charge</span>
                    <span class="badge badge-diesel" style="margin-left: auto; font-size: 10px;" id="fuelLogsCount">0</span>
                </button>
                <button class="tab" data-tab="maintenance">
                    <span class="tab-icon">üîß</span> 
                    <span data-i18n="maintenance">Maintenance</span>
                    <span class="badge badge-diesel" style="margin-left: auto; font-size: 10px;" id="maintenanceCount">0</span>
                </button>
                <button class="tab" data-tab="expenses">
                    <span class="tab-icon">üí∞</span> 
                    <span data-i18n="expenses">Other Costs</span>
                    <span class="badge badge-diesel" style="margin-left: auto; font-size: 10px;" id="expensesCount">0</span>
                </button>
            </nav>
        </aside>

        <!-- Main Wrapper -->
        <main class="main-wrapper">
            <!-- Topbar -->
            <div class="topbar">
                <div class="topbar-left">
                    <div id="fileInfo" class="file-status hidden">
                        <span id="fileName" class="file-name">filename.json</span>
                        <div class="file-meta">
                            <span id="exportDate">2025-01-01</span> ‚Ä¢ <span id="appVersion">1.0.0</span>
                        </div>
                    </div>
                </div>
                <div class="topbar-right">
                    <button id="exportCsvBtn" class="btn-secondary hidden" data-i18n="exportCsv">Export CSV</button>
                    <button id="openFileBtn" class="btn-primary" data-i18n="openFile">Open File</button>
                    <div style="width: 1px; height: 24px; background: var(--border); margin: 0 8px;"></div>
                    <!-- Unit Settings -->
                    <select id="currencySelect" class="unit-select" title="Currency">
                        <option value="USD">$ USD</option>
                        <option value="KRW">‚Ç© KRW</option>
                        <option value="EUR">‚Ç¨ EUR</option>
                        <option value="JPY">¬• JPY</option>
                        <option value="GBP">¬£ GBP</option>
                        <option value="CNY">¬• CNY</option>
                        <option value="CAD">C$ CAD</option>
                        <option value="AUD">A$ AUD</option>
                        <option value="CHF">Fr CHF</option>
                        <option value="INR">‚Çπ INR</option>
                        <option value="MXN">$ MXN</option>
                        <option value="BRL">R$ BRL</option>
                        <option value="RUB">‚ÇΩ RUB</option>
                        <option value="THB">‡∏ø THB</option>
                        <option value="VND">‚Ç´ VND</option>
                        <option value="PHP">‚Ç± PHP</option>
                        <option value="SGD">S$ SGD</option>
                        <option value="MYR">RM MYR</option>
                        <option value="IDR">Rp IDR</option>
                        <option value="TWD">NT$ TWD</option>
                        <option value="HKD">HK$ HKD</option>
                        <option value="NZD">NZ$ NZD</option>
                        <option value="SEK">kr SEK</option>
                        <option value="NOK">kr NOK</option>
                        <option value="DKK">kr DKK</option>
                        <option value="ZAR">R ZAR</option>
                        <option value="AED">ÿØ.ÿ• AED</option>
                        <option value="SAR">Ô∑º SAR</option>
                        <option value="PLN">z≈Ç PLN</option>
                        <option value="TRY">‚Ç∫ TRY</option>
                        <option value="CZK">Kƒç CZK</option>
                        <option value="HUF">Ft HUF</option>
                        <option value="ILS">‚Ç™ ILS</option>
                        <option value="CLP">$ CLP</option>
                        <option value="ARS">$ ARS</option>
                        <option value="COP">$ COP</option>
                        <option value="EGP">E¬£ EGP</option>
                        <option value="PKR">‚Ç® PKR</option>
                        <option value="BDT">‡ß≥ BDT</option>
                        <option value="NGN">‚Ç¶ NGN</option>
                    </select>
                    <select id="distanceUnitSelect" class="unit-select" title="Distance Unit">
                        <option value="km">km</option>
                        <option value="mi">mi</option>
                    </select>
                    <select id="volumeUnitSelect" class="unit-select" title="Volume Unit">
                        <option value="L">L</option>
                        <option value="gal_us">gal (US)</option>
                        <option value="gal_uk">gal (UK)</option>
                    </select>
                    <select id="languageSelect" class="language-select">
                        <option value="en">English</option>
                        <option value="ko">ÌïúÍµ≠Ïñ¥</option>
                        <option value="de">Deutsch</option>
                        <option value="ja">Êó•Êú¨Ë™û</option>
                        <option value="es">Espa√±ol</option>
                        <option value="fr">Fran√ßais</option>
                    </select>
                    <button id="helpBtn" class="btn-icon">‚ùì</button>
                </div>
            </div>

            <!-- Content Area -->
            <div class="content-scroll">
                <div id="mainContent" class="main-content hidden">
                    
                    <div class="backup-notice">
                        <span class="notice-icon">üí°</span>
                        <span class="notice-text">All data is displayed based on the export date. This is a read-only viewer.</span>
                    </div>

                    <!-- Stats -->
                    <div id="summaryStats" class="summary-stats">
                        <div class="stat-card">
                            <div class="stat-icon" style="color: #2563EB; background: #DBEAFE;">‚õΩ</div>
                            <div class="stat-content">
                                <div class="stat-value" id="totalFuelCost">$0</div>
                                <div class="stat-label" data-i18n="totalFuelCost">Total Fuel Cost</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon" style="color: #D97706; background: #FEF3C7;">üîß</div>
                            <div class="stat-content">
                                <div class="stat-value" id="totalMaintenanceCost">$0</div>
                                <div class="stat-label" data-i18n="totalMaintenanceCost">Maintenance Cost</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon" style="color: #059669; background: #D1FAE5;">üí∞</div>
                            <div class="stat-content">
                                <div class="stat-value" id="totalExpenses">$0</div>
                                <div class="stat-label" data-i18n="totalExpenses">Other Costs</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon" style="color: #4B5563; background: #F3F4F6;">üìä</div>
                            <div class="stat-content">
                                <div class="stat-value" id="totalAllCosts">$0</div>
                                <div class="stat-label" data-i18n="totalAllCosts">Total All Costs</div>
                            </div>
                        </div>
                    </div>

                    <!-- Filter Bar -->
                    <div class="search-bar">
                        <input type="text" id="searchInput" placeholder="Search..." class="search-input">
                        <select id="vehicleFilter" class="vehicle-filter">
                            <option value="" data-i18n="allVehicles">All Vehicles</option>
                        </select>
                        <select id="sortFilter" class="sort-filter">
                            <option value="default" data-i18n="sortDefault">Default</option>
                            <option value="name-asc" data-i18n="sortNameAsc">Name (A-Z)</option>
                            <option value="name-desc" data-i18n="sortNameDesc">Name (Z-A)</option>
                            <option value="date-asc" data-i18n="sortDateAsc">Date (Old-New)</option>
                            <option value="date-desc" data-i18n="sortDateDesc">Date (New-Old)</option>
                        </select>
                        <button id="clearSearch" class="btn-secondary" data-i18n="clear">Clear</button>
                    </div>

                    <!-- Tab Contents -->
                    <div id="vehiclesTab" class="tab-content active table-container">
                        <div id="vehiclesTable"></div>
                    </div>

                    <div id="fuelLogsTab" class="tab-content table-container">
                        <div id="fuelLogsTable"></div>
                    </div>

                    <div id="maintenanceTab" class="tab-content table-container">
                        <div id="maintenanceTable"></div>
                    </div>

                    <div id="expensesTab" class="tab-content table-container">
                        <div id="expensesTable"></div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Welcome Screen -->
        <div id="welcomeScreen" class="welcome-screen">
            <div class="welcome-content">
                <h2>üöó AutoLog JSON Viewer</h2>
                <p>View JSON backup files exported from AutoLog app.</p>
                <p class="web-version-notice">üåê Web Browser Version - No installation required!</p>
                <button id="openFileBtn2" class="btn-primary" style="margin-top: 24px; font-size: 16px; padding: 12px 32px;">
                    üìÇ Open JSON File
                </button>
                <div class="features">
                    <div class="feature">
                        <h3>‚úÖ Complete Data View</h3>
                        <p>Vehicles, fuel logs, maintenance, other costs</p>
                    </div>
                    <div class="feature">
                        <h3>üîç Search & Filter</h3>
                        <p>Filter by vehicle and quick search</p>
                    </div>
                    <div class="feature">
                        <h3>üìä Statistics</h3>
                        <p>View cost summaries and totals</p>
                    </div>
                    <div class="feature">
                        <h3>üîí Privacy First</h3>
                        <p>All data processed locally in your browser</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Detail Modal -->
        <div id="detailModal" class="modal hidden">
            <div class="modal-content">
                <button class="modal-close">&times;</button>
                <div id="detailContent"></div>
            </div>
        </div>

        <!-- Help Modal -->
        <div id="helpModal" class="modal hidden">
            <div class="modal-content">
                <button class="modal-close">&times;</button>
                <div id="helpContent"></div>
            </div>
        </div>
    </div>

    <!-- Hidden File Input -->
    <input type="file" id="fileInput" accept=".json" style="display: none;">

    <script src="app.js"></script>
</body>
</html>
